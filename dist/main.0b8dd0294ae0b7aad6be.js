!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";var a=function(){};a.createElement=function(e,t,n){var a=document.createElement(e);return t&&Object.keys(t).forEach(function(e){a.setAttribute(e,t[e])}),n&&a.appendChild(n),a},e.exports=a},function(e,t,n){"use strict";var a=n(0);e.exports=function(e,t,n){this._parentElement=e,this._buttonElement=null,this._changeCallback=n,this._value=t;var i=this;this._init=function(){this._buttonElement=a.createElement("div",{class:"u-circle"+(this._value.active?" active":"")}),this._buttonElement.appendChild(document.createTextNode(this._value.text)),this._value.toggleable&&(this._buttonElement.setAttribute("role","button"),this._buttonElement.setAttribute("aria-pressed",this._value.active),this._buttonElement.addEventListener("click",function(){i._value.active=!i._value.active,this.setAttribute("aria-pressed",i._value.active);var e=this.getAttribute("class");!e.includes("active")&&i._value.value?e+=" active":e=e.replace(" active",""),this.setAttribute("class",e),i._changeCallback&&i._changeCallback(i._value)}))},this.render=function(){this._parentElement&&this._parentElement.appendChild(this._buttonElement)},this.getHtmlElement=function(){return i._buttonElement},this._init()}},function(e,t,n){"use strict";var a=n(10),i="GET_COMMENTS";function r(){}r.getComments=function(e){return new Promise(function(t,n){var r=a.getInstance().getData(i);(r?new Promise(function(e){e(r)}):fetch("/src/assets/apidemo.json").then(function(e){return new Promise(function(t,n){e.json().then(function(e){a.getInstance().setData(i,e),t(new Promise(function(t){t(e)}))}).catch(n)})})).then(function(t){var n=JSON.parse(JSON.stringify(t));return e&&(n.items=n.items.filter(function(t){var n=!0,a=!0;return void 0!==e.ratings&&(n=-1!==e.ratings.indexOf(t.rating)),void 0!==e.search&&(a=t.comment.toUpperCase().includes(e.search.toUpperCase())),n&&a})),n}).then(t).catch(n)})},r.getCats=function(e){return fetch("https://api.thecatapi.com/v1/images/search?limit="+e).then(function(e){return e.json()})},e.exports=r},function(e,t,n){"use strict";var a=function(){},i=function(){};a.getValue=function(e,t){var n=t.split("."),a=Object.assign({},e);try{n.forEach(function(e){if(!a.hasOwnProperty(e))throw new i;a=a[e]})}catch(e){return null}return a},e.exports=a},function(e,t,n){"use strict";n(5),(new(n(6))).init(document.querySelector(".u-table-wrapper"),document.querySelector(".u-ratings-wrapper"),document.querySelector(".u-search-bar-wrapper"))},function(e,t,n){},function(e,t,n){"use strict";var a=n(7),i=n(8),r=n(9),l=n(1),o=n(11),c=n(12),s=n(2);e.exports=function(){this._searchInput=null,this._ratingFilter=null,this._table=null,this._filters={search:"",ratings:[]},this._idLastRequest=null;var e={columns:[{title:"Rating",getCustomTemplate:function(e){return new l(null,{text:e.rating,active:!0,toggleable:!1}).getHtmlElement()}},{title:"Comment",field:"comment"},{title:"Browser",getCustomTemplate:function(e){var t=document.createElement("div"),n=document.createElement("div");n.appendChild(document.createTextNode(e.computed_browser.Browser));var a=document.createElement("div");return a.setAttribute("class","secondary-text"),a.appendChild(document.createTextNode(e.computed_browser.Version)),t.appendChild(n),t.appendChild(a),t}},{title:"Device",field:"computed_browser.Platform"},{title:"Platform",field:"computed_browser.Platform"}],onRowClick:function(e,t){var n="<h6> ("+("new"===e.status?"You have never seen this comment":"You have already read this comment")+")</h6>",a=e.starred?"<span class='svg-icon-wrapper star'></span>":"",i=new r(e);new o("Comment details "+a+n,i.getHtmlElement()).open(),i.onRenderCallback()}},t=[{value:1,active:!0,text:"1",toggleable:!0},{value:2,active:!0,text:"2",toggleable:!0},{value:3,active:!0,text:"3",toggleable:!0},{value:4,active:!0,text:"4",toggleable:!0},{value:5,active:!0,text:"5",toggleable:!0}],n=this;this.init=function(n,r,l){this._searchInput=new a(l,this._onSearchInputChange),this._searchInput.render(),this._filters.search=this._searchInput.getFilter(),this._ratingFilter=new i(r,t,this._onRatingFilterChange),this._ratingFilter.render(),this._filters.ratings=this._ratingFilter.getFilter(),this._table=new c(n,e),this._table.render(),this._updateTable()},this._onSearchInputChange=function(e){console.debug("Changed search",e),n._filters.search=e,n._updateTable()},this._onRatingFilterChange=function(e){console.debug("Changed filter",e),n._filters.ratings=e,n._updateTable()},this._updateTable=function(){var e=(new Date).getTime();n._idLastRequest=e,s.getComments(this._filters).then(function(t){e===n._idLastRequest&&(console.debug("updated table data",t),n._table.updateData(t.items))})}}},function(e,t,n){"use strict";var a=n(0);e.exports=function(e,t){this._parentElement=e,this._inputElement=null,this._searchCallback=t,this.value="";var n=this;this.render=function(){this._inputElement=a.createElement("input",{class:"u-search-bar"}),this._inputElement.setAttribute("placeholder","Search here..."),this._inputElement.setAttribute("type","text"),this._inputElement.addEventListener("keyup",function(){n.value=this.value,n._searchCallback(n.getFilter())}),this._parentElement.appendChild(this._inputElement)},this.getFilter=function(){return n.value}}},function(e,t,n){"use strict";var a=n(1);e.exports=function(e,t,n){this._parentElement=e,this._ratingBtns=[],this._changeCallback=n,this._values=t;var i=this;this.render=function(){this._values.forEach(function(e){var t=new a(i._parentElement,e,i._onRatingChange);i._ratingBtns.push(t),t.render()})},this.getFilter=function(){return i._values.filter(function(e){return e.active}).map(function(e){return e.value})},this._onRatingChange=function(e){i._values[e.value-1]=e,i._changeCallback(i.getFilter())}}},function(e,t,n){"use strict";var a=n(0),i=n(2),r=n(3);function l(e,t){console.log(e,t);var n=new OpenLayers.Map("map");n.addLayer(new OpenLayers.Layer.OSM);var a=new OpenLayers.Control.LayerSwitcher({});n.addControl(a);var i=new OpenLayers.LonLat(e,t).transform(new OpenLayers.Projection("EPSG:4326"),n.getProjectionObject());n.setCenter(i,15)}e.exports=function(e){this._rootElement=null,this._commentData=e;var t=this;this._init=function(){var e,t;console.log(this._commentData),this._rootElement=a.createElement("div"),this._rootElement.appendChild((e=this._commentData,t=a.createElement("div",{class:"labels-wrapper"}),e.labels&&e.labels.forEach(function(e){t.appendChild(a.createElement("div",{class:"label"},document.createTextNode(e)))}),t)),this._rootElement.appendChild(function(e){var t=a.createElement("div");return e.tags.forEach(function(e){var n=-1!==["attractive","usable","interesting"].indexOf(e);t.appendChild(a.createElement("div",{class:"tag to-right"+(n?" positive":" negative")},document.createTextNode(e)))}),t.appendChild(a.createElement("div",{class:"clear-float"})),t}(this._commentData)),this._rootElement.appendChild(function(e){var t=a.createElement("div",{class:"section-primary"}),n=a.createElement("div",{class:"section-content"});t.appendChild(n);var i=r.getValue(e,"custom.subject"),l=(null!==i?i+" - ":"")+new Date(e.creation_date).toLocaleDateString();if(n.appendChild(a.createElement("h3",null,document.createTextNode(l))),n.appendChild(a.createElement("p",null,document.createTextNode(e.comment))),e.url){var o=a.createElement("a",{class:"action-button with-icon secondary to-right",target:"_blank",href:e.url});o.innerHTML='<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 4h-13v18h20v-11h1v12h-22v-20h14v1zm10 5h-1v-6.293l-11.646 11.647-.708-.708 11.647-11.646h-6.293v-1h8v8z"/></svg>',o.appendChild(document.createTextNode("Go to the site")),n.appendChild(o)}if(e.email){var c=a.createElement("a",{class:"action-button with-icon secondary to-right",href:"mailto:"+e.email});c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 21h-24v-18h24v18zm-23-16.477v15.477h22v-15.477l-10.999 10-11.001-10zm21.089-.523h-20.176l10.088 9.171 10.088-9.171z"/></svg>',c.appendChild(document.createTextNode("Contact the user")),n.appendChild(c)}return n.appendChild(a.createElement("div",{class:"clear-float"})),t}(this._commentData)),this._rootElement.appendChild(function(e){var t=a.createElement("div",{class:"background-section"});t.appendChild(a.createElement("div",{id:"map"}));var n=a.createElement("div",{class:"background-section-content"});n.appendChild(a.createElement("h3",null,document.createTextNode("Location")));var i=a.createElement("div",{class:"center-content"});return i.appendChild(a.createElement("h1",null,document.createTextNode(e.geo.city?e.geo.city:"City not specified"))),i.appendChild(a.createElement("img",{src:"https://countryflags.io/"+e.geo.country+"/flat/64.png"})),n.appendChild(i),t.appendChild(n),t}(this._commentData)),this._rootElement.appendChild(function(e){var t=a.createElement("div");t.appendChild(a.createElement("h3",null,document.createTextNode("Browser & device info")));var n=a.createElement("div",{class:"center-content"});return t.appendChild(n),n.appendChild(a.createElement("h1",null,document.createTextNode(e.computed_browser.FullBrowser))),n.appendChild(a.createElement("h2",null,document.createTextNode("for "+e.computed_browser.Platform))),n.appendChild(a.createElement("h4",null,document.createTextNode("Version"+e.computed_browser.Version))),n.appendChild(a.createElement("h5",null,document.createTextNode(e.screen.width+"x"+e.screen.height))),t}(this._commentData)),this._rootElement.appendChild(function(e){var t=a.createElement("div",{class:"section-primary dark"}),n=a.createElement("div",{class:"section-content"});t.appendChild(n);var r=a.createElement("div",{class:"image-grid"});n.appendChild(r);var l=a.createElement("div",{class:"image-grid-row"});r.appendChild(l);var o=a.createElement("div",{class:"image-grid-column"});l.appendChild(o);var c=a.createElement("div",{class:"image-grid-column"});return l.appendChild(c),i.getCats(Object.keys(e.images).length).then(function(t){t.forEach(function(t,n){var i=a.createElement("div",{class:"polaroid"});i.appendChild(a.createElement("img",{src:t.url}));var r=Object.keys(e.images)[n];i.appendChild(a.createElement("div",{class:"polaroid-title"},document.createTextNode(r))),i.appendChild(a.createElement("div",{class:"polaroid-subtitle"},document.createTextNode(e.images[r].width+"x"+e.images[r].height)));var l=a.createElement("div",{class:"scrolling-view"},a.createElement("a",{target:"_blank",href:e.images[r].url},a.createElement("span",null,document.createTextNode("view"))));i.appendChild(l),i.addEventListener("mouseover",function(){l.setAttribute("class",l.getAttribute("class").replace(/\sactive/,"")+" active")}),i.addEventListener("mouseleave",function(){l.setAttribute("class",l.getAttribute("class").replace(/\sactive/,""))}),n%2?o.appendChild(i):c.appendChild(i)})}),t}(this._commentData))},this.getHtmlElement=function(){return t._rootElement},this.onRenderCallback=function(){t._commentData.geo&&null!==t._commentData.geo.lon&&null!==t._commentData.geo.lat?l(t._commentData.geo.lon,t._commentData.geo.lat):l(0,0)},this._init()}},function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(){this.cacheMap={},this.setData=function(e,t){var n=t;"object"===(void 0===n?"undefined":a(n))&&(n=JSON.parse(JSON.stringify(n))),this.cacheMap[e]=n},this.getData=function(e){return this.cacheMap[e]}}var r=function(){var e;return{getInstance:function(){return e||(e=new i),e}}}();e.exports=r},function(e,t,n){"use strict";var a=n(0);e.exports=function(e,t){this._contentElement=t,this._titleHtml=e,this._overlayElement=null,this._modalWrapperElement=null,this._modalElement=null;var n=this;function i(e){"Escape"===e.key&&n.close.call(this)}this.open=function(){document.querySelector("body").appendChild(n._modalElement),setTimeout(function(){n._modalWrapperElement.setAttribute("class",n._modalWrapperElement.getAttribute("class").replace(/\sclosed/g,""))},10)},this.close=function(){n._overlayElement.remove(),n._modalWrapperElement.setAttribute("class",n._modalWrapperElement.getAttribute("class")+" closed"),document.removeEventListener("keyup",i),setTimeout(function(){n._modalElement.remove()},300)},this._init=function(){this._modalElement=a.createElement("div",{class:"u-modal-wrapper"}),this._overlayElement=a.createElement("div",{class:"u-modal-backdrop"}),this._modalElement.appendChild(this._overlayElement),this._modalWrapperElement=a.createElement("div",{class:"u-modal closed"});var e=a.createElement("div",{class:"u-modal-header"});e.innerHTML=n._titleHtml;var t=a.createElement("button",{class:"close"});t.appendChild(document.createTextNode("X")),e.appendChild(t),this._modalWrapperElement.appendChild(e);var r=a.createElement("div",{class:"u-modal-body"});this._contentElement&&r.appendChild(this._contentElement),this._modalWrapperElement.appendChild(r),this._modalElement.appendChild(this._modalWrapperElement),this._overlayElement.addEventListener("click",n.close.bind(this)),t.addEventListener("click",n.close.bind(this)),document.addEventListener("keyup",i)},this._init()}},function(e,t,n){"use strict";var a=n(3),i=n(0);e.exports=function(e,t){this._parentElement=e,this._tableElement=null,this._headerElement=null,this._data=[],this._tableOptions=t;var n=this;this._renderHeader=function(){n._headerElement&&n._headerElement.remove(),n._headerElement=document.createElement("div"),n._headerElement.setAttribute("class","u-table-row u-table-header"),n._tableOptions.columns.forEach(function(e){var t=document.createElement("div");t.setAttribute("class","u-table-cell"),t.appendChild(document.createTextNode(e.title)),n._headerElement.appendChild(t)}),this._tableElement.insertBefore(this._headerElement,this._tableElement.firstChild)},this._renderBody=function(){n._tableElement.querySelectorAll(".u-table-row.u-table-body").forEach(function(e){e.remove()}),n._data.forEach(function(e){var t=i.createElement("div",{class:"u-table-row u-table-body"});n._tableOptions.hasOwnProperty("onRowClick")&&"function"==typeof n._tableOptions.onRowClick&&(t.addEventListener("click",function(t){n._tableOptions.onRowClick(e,t)}),t.setAttribute("class",t.getAttribute("class")+" clickable")),n._tableOptions.columns.forEach(function(n){var r=i.createElement("div",{class:"u-table-cell"}),l=null;l="function"==typeof n.getCustomTemplate?n.getCustomTemplate(e):document.createTextNode(a.getValue(e,n.field));var o=i.createElement("div",{class:"u-table-cell-content-wrapper"});o.appendChild(i.createElement("div",{class:"u-table-cell-label"},document.createTextNode(n.title))),o.appendChild(l),r.appendChild(o),t.appendChild(r)}),n._tableElement.appendChild(t)})},this.render=function(){this._tableElement=i.createElement("div",{class:"u-table"}),this._parentElement.appendChild(this._tableElement),this._renderHeader(),this._renderBody()},this.updateData=function(e){n._data=e,this._renderBody()}}}]);
//# sourceMappingURL=main.0b8dd0294ae0b7aad6be.js.map